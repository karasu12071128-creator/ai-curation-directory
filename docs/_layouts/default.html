<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, initial-scale=1">

  <title>{{ page.title }} – {{ site.title }}</title>
  <meta name="description" content="{{ site.description }}">

  <!-- Analytics: Plausible -->
  <script defer data-domain="karasu12071128-creator.github.io"
          src="https://plausible.io/js/script.js"></script>

  <style>
    body {font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, "Hiragino Kaku Gothic ProN", Meiryo, "Noto Sans JP", sans-serif; margin:24px; line-height:1.6;}
    header, footer {opacity:.8; font-size:.9em;}
    .card{margin:12px 0;padding:12px;border:1px solid #e5e5e5;border-radius:8px;}
    input{padding:8px;width:100%;max-width:480px;border:1px solid #ddd;border-radius:6px;}
    a{word-break: break-all;}
    .pill{display:inline-block;margin:2px 4px 0 0;padding:.15em .6em;border:1px solid #ddd;border-radius:999px;font-size:.85em}
  </style>

  <script>
    // 共通: イベント送信用ヘルパ
    function track(name, props) {
      try { if (window.plausible) window.plausible(name, { props: props || {} }); }
      catch (e) { /* no-op */ }
    }

    // クリック委譲（CSV / data-event）
    document.addEventListener('click', function (e) {
      const a = e.target.closest('a');
      if (!a) return;

      // CSV ダウンロード（path が resources.csv で終わる）
      try {
        const url = new URL(a.href, location.href);
        if (url.pathname.endsWith('/resources.csv') || url.pathname.endsWith('resources.csv')) {
          track('csv_download', { href: url.pathname });
        }
      } catch (_) {}

      // data-event が付いている要素（Openリンクやタグなど）
      const ev = a.dataset.event;
      if (ev) {
        const payload = { ...a.dataset };
        delete payload.event;
        track(ev, payload);
      }
    }, true);
  </script>
</head>

<body>
<header>
  <h1>{{ site.title }}</h1>
  <p>{{ site.description }}</p>
  <nav>
    <a href="{{ '/' | relative_url }}">Home</a> ・
    <a href="{{ '/list.html' | relative_url }}">一覧</a> ・
    <!-- CSV リンクは data-event で拾ってもOKだが、上の委譲が URL でも拾うのでそのままでも動きます。 -->
    <a href="{{ '/resources.csv' | relative_url }}" data-event="csv_download">CSV（サンプル）</a>
  </nav>
  <hr>
</header>

<main>
  {{ content }}
</main>

<footer>
  <hr>
  <p>© {{ site.title }}</p>
</footer>
</body>
</html>